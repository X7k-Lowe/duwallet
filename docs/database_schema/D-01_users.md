# D-01: users テーブル定義

ユーザーの基本情報を管理するテーブルです。認証情報と個人設定を含みます。

## テーブル仕様

| 項目                | 値               |
|---------------------|------------------|
| 物理テーブル名      | users            |
| 論理テーブル名      | ユーザー         |
| 主キー              | id               |
| 外部キー            | なし             |
| 期待レコード数      | 数十〜数百       |

## カラム定義

| 物理名              | 論理名           | データ型          | 必須  | デフォルト値      | 説明                                             |
|---------------------|------------------|-------------------|-------|-------------------|--------------------------------------------------|
| id                  | ユーザーID       | uuid              | Yes   | uuid_generate_v4() | プライマリキー                                   |
| email               | Eメール          | varchar(255)      | Yes   | なし              | ユーザー認証用メールアドレス、一意制約あり       |
| password_hash       | パスワードハッシュ | varchar(255)     | Yes   | なし              | ハッシュ化されたパスワード                       |
| name                | 名前              | varchar(100)      | Yes   | なし              | ユーザー表示名                                   |
| gender              | 性別              | varchar(10)       | No    | null              | 性別（male/female/other）                        |
| multiple_wallets    | 複数家計簿参加設定 | boolean          | Yes   | false             | 複数家計簿に参加するか（true）、一つのみか（false） |
| created_at          | 作成日時          | timestamp         | Yes   | CURRENT_TIMESTAMP | レコード作成日時                                 |
| updated_at          | 更新日時          | timestamp         | Yes   | CURRENT_TIMESTAMP | レコード更新日時                                 |

## インデックス

| インデックス名      | カラム            | 種類              | 説明                                             |
|---------------------|-------------------|-------------------|--------------------------------------------------|
| users_pkey          | id                | PRIMARY KEY       | プライマリキー                                   |
| users_email_key     | email             | UNIQUE            | メールアドレスの一意性を保証                     |

## 制約

- メールアドレスは一意であること
- パスワードは8文字以上であること（アプリケーション層でチェック）

## 関連テーブル

- wallet_members: ユーザーと家計簿の関連を管理
- wallet_join_requests: ユーザーの家計簿参加申請を管理
