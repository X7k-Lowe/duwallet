# é–‹ç™ºç’°å¢ƒæ§‹ç¯‰æ‰‹é † (duwallet)

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€**ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ**ã‚’æœ€çŸ­ã§ç«‹ã¡ä¸Šã’ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## 1. å‰æã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

| ãƒ„ãƒ¼ãƒ«         | æ¨å¥¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³      | å‚™è€ƒ                                                           |
| -------------- | ------------------- | -------------------------------------------------------------- |
| Git            | 2.40 ä»¥ä¸Š           | GitHub ã¨ã®é€£æºã«ä½¿ç”¨                                          |
| Node.js        | 18 LTS              | Next.js 14 æ¨å¥¨ç’°å¢ƒã€‚`nvm` ç­‰ã§åˆ‡æ›¿å¯                        |
| pnpm           | 8.15.4              | `corepack enable && corepack prepare pnpm@latest --activate` |
| Docker Desktop | 4.27+ (Engine 24.x) | Compose v2 åŒæ¢±                                                |

> âœ¨ **M1/M2 Mac** ã®å ´åˆã¯ Rosetta 2 ã‚’æœ‰åŠ¹åŒ–ã—ãŸã†ãˆã§ Docker ã® Apple Silicon ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

---

## 1-A. Windows (WSL2 ãªã—) ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **Node.js** : [https://nodejs.org/ja](https://nodejs.org/ja) ã‹ã‚‰ 18LTS MSI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
2. **pnpm** : PowerShell ã‚’ç®¡ç†è€…ã¨ã—ã¦å®Ÿè¡Œã—
   ```powershell
   corepack enable; corepack prepare pnpm@latest --activate
   ```
3. **Git** : Git for Windows (2.42+) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
4. **Docker Desktop** : Windows ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€è¨­å®š > ä½¿ç”¨ãƒªã‚½ãƒ¼ã‚¹ ã§ CPU 4 / ãƒ¡ãƒ¢ãƒª 4GB ä»¥ä¸Šã‚’å‰²å½“ã€‚
5. ã‚³ãƒãƒ³ãƒ‰ã¯ **PowerShell** ã§ã‚‚ **Git Bash** ã§ã‚‚å¯ã€‚

> âš ï¸ Windows Home ã§ Hyper-V ãŒç„¡åŠ¹ãªå ´åˆã¯ WSL2 backend ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚

---

## 2. ãƒªãƒã‚¸ãƒˆãƒªã®å–å¾—

```bash
# ä»»æ„ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§
git clone https://github.com/<your-account>/duwallet.git
cd duwallet
```

> æœ¬ãƒªãƒã‚¸ãƒˆãƒªã¯ã‚³ãƒ¼ãƒ‰ã§ã¯ãªãè¨­è¨ˆè³‡æ–™ã®ã¿ã‚’ä¿æŒã—ã¾ã™ã€‚å®Ÿè£…ç”¨ãƒªãƒã‚¸ãƒˆãƒªã¯åˆ¥é€”ä½œæˆäºˆå®šã§ã™ã€‚

---

## 3. Supabase ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®èµ·å‹• (Docker Compose)

1. Supabase CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆHomebrew ä¾‹ï¼‰
   ```bash
   brew install supabase/tap/supabase
   ```
2. åˆæœŸåŒ– & èµ·å‹•
   ```bash
   supabase init # åˆå›ã®ã¿
   supabase start # PostgreSQL + Studio + Edge Functions ãŒèµ·å‹•
   ```
3. `.supabase` ãƒ•ã‚©ãƒ«ãƒ€ãŒç”Ÿæˆã•ã‚Œã€`http://localhost:54322` ã§ DBã€`http://localhost:54322/auth/v1` ã§ Auth ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

---

## 4. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹• (é–‹ç™º)

```bash
pnpm install      # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è§£æ±º
cp .env.example .env.local  # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
# .env.local ã‚’ç·¨é›†ã—ã€SUPABASE_URL / SUPABASE_ANON_KEY ãªã©ã‚’å…¥åŠ›

pnpm dev          # http://localhost:3000 ã§èµ·å‹•
```

### Docker çµŒç”±ã§ã®èµ·å‹• (æ¨å¥¨)

ã‚¢ãƒ—ãƒªã¨ Supabase ã‚’ã¾ã¨ã‚ã¦èµ·å‹•ã—ãŸã„å ´åˆã¯ `docker-compose.dev.yml` ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

```bash
docker compose -f docker-compose.dev.yaml up -d --build
```

* Next.js = [http://localhost:3000](http://localhost:3000)
* Supabase/PostgreSQL = [http://localhost:54322](http://localhost:54322)

---

#### ã€è£œè¶³ã€‘Supabase CLIã§èµ·å‹•ã™ã‚‹å ´åˆ

Supabase CLI (`supabase start`) ã§èµ·å‹•ã—ãŸå ´åˆã¯ `http://localhost:54323` ã¨ãªã‚Šã¾ã™ã€‚

---

## 4-B. Docker Compose ã§ä¸€æ‹¬èµ·å‹• (Windows/Mac å…±é€š)

```powershell
# .env ãƒ•ã‚¡ã‚¤ãƒ«ã« Supabase é–¢é€£ã‚­ãƒ¼ã‚’è¨­å®šå¾Œ
# åˆå›ã®ã¿ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
docker compose -f docker-compose.dev.yaml build
# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•
docker compose -f docker-compose.dev.yaml up -d
```

* ã‚¢ãƒ—ãƒª : [http://localhost:3000](http://localhost:3000)
* PostgreSQL (Supabase) : `localhost:54322` (ãƒ¦ãƒ¼ã‚¶/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: supabase)

åœæ­¢: `docker compose -f docker-compose.dev.yaml down -v` ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ ã”ã¨å‰Šé™¤ã€‚

---

## 5. ä¾¿åˆ©ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

| ã‚³ãƒãƒ³ãƒ‰              | èª¬æ˜                                            |
| --------------------- | ----------------------------------------------- |
| `pnpm lint`         | ESLint + Prettier ãƒã‚§ãƒƒã‚¯                      |
| `pnpm test`         | Vitest å®Ÿè¡Œ                                     |
| `pnpm typecheck`    | TypeScript å‹ãƒã‚§ãƒƒã‚¯ã®ã¿                       |
| `supabase db reset` | ãƒ­ãƒ¼ã‚«ãƒ« DB ã‚’ãƒªã‚»ãƒƒãƒˆ & ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å†å®Ÿè¡Œ |

---

## 6. VSCode æ‹¡å¼µæ¨å¥¨

* **ESLint** â€“ ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
* **Tailwind CSS IntelliSense** â€“ ã‚¯ãƒ©ã‚¹è£œå®Œ
* **Prisma** â€“ (å°†æ¥ RLS View ç­‰ã‚’ Prisma ã§æ‰±ã†å ´åˆ)
* **Supabase** â€“ ã‚¯ã‚¨ãƒªã‚¨ãƒ‡ã‚£ã‚¿

---

## 7. ã‚ˆãã‚ã‚‹ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

| ç—‡çŠ¶                                   | å¯¾å‡¦                                                            |
| -------------------------------------- | --------------------------------------------------------------- |
| `next-pwa` å‘¨ã‚Šã®ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼        | `node_modules/.cache` ã‚’å‰Šé™¤å¾Œ `pnpm dev` ã‚’å†å®Ÿè¡Œ          |
| Supabase æ¥ç¶šã‚¨ãƒ©ãƒ¼ (`ECONNREFUSED`) | `supabase start` ãŒå‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèªã€‚ãƒãƒ¼ãƒˆç«¶åˆã‚‚è¦ãƒã‚§ãƒƒã‚¯ |
| Docker èµ·å‹•ãŒé‡ã„                      | CPU/ãƒ¡ãƒ¢ãƒªåˆ¶é™ã‚’ Docker Desktop è¨­å®šã§ç·©å’Œ                      |

---

ã“ã‚Œã§ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã¯å®Œäº†ã§ã™ ğŸ‰
